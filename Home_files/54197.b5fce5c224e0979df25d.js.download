"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[54197,82752],{941285:(t,e,s)=>{s.d(e,{Spinner:()=>a});s(683135);var i=s(571690),r=s(607436);const n=(0,i.parseHtmlElement)(function(t=""){return`<div class="tv-spinner ${t}" role="progressbar"></div>`}());class a{constructor(t){this._shown=!1,this._el=n.cloneNode(!0),this.setSize(r.spinnerSizeMap[t||r.DEFAULT_SIZE])}spin(t){return this._el.classList.add("tv-spinner--shown"),void 0===this._container&&(this._container=t,void 0!==t&&t.appendChild(this._el)),this._shown=!0,this}stop(t){return t&&void 0!==this._container&&this._container.removeChild(this._el),this._el&&this._el.classList.remove("tv-spinner--shown"),this._shown=!1,this}setStyle(t){return Object.keys(t).forEach((e=>{const s=t[e];void 0!==s&&this._el.style.setProperty(e,s)})),this}style(){return this._el.style}setSize(t){const e=void 0!==t?`tv-spinner--size_${t}`:"";return this._el.className=`tv-spinner ${e} ${this._shown?"tv-spinner--shown":""}`,this}getEl(){return this._el}destroy(){this.stop(),delete this._el,delete this._container}}},192784:(t,e,s)=>{s.r(e),s.d(e,{flushDelegate:()=>r});var i=s(707957);const r=new(s.n(i)())},62802:(t,e,s)=>{t=s.nmd(t),s(638456);var i=s(120780).fetch,r=s(868073).regExpEscape,n=s(226722).TVXWindowEvents,a=s(49437).TVLocalStorage,o=s(707957),l=s(244842),h=s(125226).isFeatureEnabled,{flushDelegate:u}=s(192784),c=s(201089).getLogger("Lib.TVSettings"),d=["s.tradingview.com","betacdn.tradingview.com"],m=(l.enabled("use_localstorage_for_settings"),window.TVSettings=function(){var t=!1,e=null,s=!1;function _(){return!(e||window.is_authenticated)}try{t=!TradingView.onWidget()&&parent&&parent!==window&&!!parent.IS_DEMO_PAGE}catch(t){}if(t){var p={"widgetbar.layout-settings":{widgets:{},settings:{minimized:!0}},notShowMainWizard:!0},g=function(t,e,s){var i=p[t];return null==i?e:i},f=function(){};return{loaded:!1,loadedModel:!1,getValue:g,getJSON:g,getBool:g,getFloat:g,getInt:g,setValue:f,setJSON:f,remove:f,keys:function(){return Object.keys(p)},keysMask:function(){return[]},sync:f,onSync:{subscribe:function(){}}}}var v=12e4;"local"===window.environment&&(v=5e3);var y,b,w,S=TradingView.onWidget()?"tradingview-widget":"tradingview",M=S+".",x={},k=[],C=[/^widgetbar\.widget\.watchlist.+/,/.+quicks$/,/^widgetbar\.layout-settings$/,/^ChartSideToolbarWidget\.visible$/,/^onwidget\.watchlist$/,/^chart\.favoriteDrawings$/,/^chart\.favoriteDrawingsPosition$/,/^chart\.favoriteLibraryIndicators$/,/^loadChartDialog.favorites$/,/^ChartFavoriteDrawingToolbarWidget\.visible/,/^trading\.chart\.proterty$/,/^trading_floating_toolbar\.position$/,/^trading\.orderWidgetMode\./,/^symbolWatermark$/,/^pinereference\.size$/,/^pinereference\.position$/,/^hint\.+/,/^ChartDrawingToolbarWidget\.visible/];function I(t){return M+t}function E(t){return t.substring(M.length)}function F(t,e){var s=x[t];return null==s?e:s}function T(t,e,s){s=s||{};var i=""+e;return x[t]!==i&&(x[t]=i,P(t)),s.forceFlush&&!b&&(b=setTimeout((function(){b=void 0,$()}),10)),m}function N(t,e){return e=e||{},
null!=x[t]&&(delete x[t],P(t)),e.forceFlush&&$(),m}function D(){y=void 0,k.length&&$()}function P(t){if(e)null==x[t]?e.removeValue(t):e.setValue(t,x[t]);else if(_())try{null==x[t]?a.removeItem(I(t)):a.setItem(I(t),x[t])}catch(t){}else k.push(t),y||(y=setTimeout(D,v));n.emit("settings",JSON.stringify({key:t,value:x[t]}))}function $(t){if(!s&&!w)if(h("disable_save_settings"))c.logWarn("Settings flashing has been skipped because of disable_save_settings featuretoggle");else if(!l.enabled("widget")&&!_()&&0!==k.length){var e=k;k=[];for(var r={},n=e.length;n--;){var a=e[n],o=x[a];void 0===o&&(o=null),r[a]=o}var u=new FormData;u.append("delta",JSON.stringify(r)),t&&navigator.sendBeacon?navigator.sendBeacon("/savesettings/",u):i("/savesettings/",{method:"POST",credentials:"include",body:u}).then((function(s){if(s.ok||(k=k.concat(e)),[429,503].includes(s.status)){var i=1e3*+s.headers.get("retry-after")||3e5;w=setTimeout((()=>{w=void 0,$(t)}),i)}})).catch((function(){k=k.concat(e)}))}}function R(){return Object.keys(x)}function A(t){for(var e=0;e<C.length;++e)if(C[e].exec(t))return!0;return!1}function L(t){return t.substring(0,M.length)===M}function B(t){x={};const e=0===Object.keys(t).length;e||function(t){Object.keys(t).forEach((function(e){x[e]=t[e]+""}))}(t),function(t){for(var e=a.length;e--;){var s=a.key(e);s&&L(s)&&(t&&T(E(s),a.getItem(s)),a.removeItem(s))}}(e)}n.on("settings",(function(t){var e=JSON.parse(t);null==e.value?delete x[e.key]:x[e.key]=e.value}));var O=new o;return document.addEventListener("visibilitychange",(function(){"hidden"!==document.visibilityState&&!0!==document.hidden||$()})),window.addEventListener("pagehide",(function(){$(!0)})),window.addEventListener("beforeunload",(function(){$(!0)})),u.subscribe(null,(()=>{$()})),{loaded:!1,loadedModel:!1,getValue:F,getJSON:function(t,e){var s=F(t,void 0);if(null==s)return e;try{return JSON.parse(s)}catch(s){return N(t),e}},getBool:function(t,e){var s=F(t);return null==s?e:!(!s||"false"===s||0==+s)},getFloat:function(t,e,s){var i=F(t,void 0);if(null==i)return e;var r=parseFloat(i);if(!isFinite(r))throw new TypeError('"'+i+'" is not float (key: "'+t+'")');return r},getInt:function(t,e,s){var i=F(t,void 0);if(null==i)return e;var r=parseInt(i,10);if(!isFinite(r))throw new TypeError('"'+i+'" is not int (key: "'+t+'")');return r},setValue:T,setJSON:function(t,e,s){return T(t,JSON.stringify(e),s),m},remove:N,keys:R,keysMask:function(t,e){for(var s=R(),i=[],n=(t=new RegExp("^"+r(t).replace(/\\\*\\\*/gi,".+").replace(/\\\*/gi,"[^.]+")+"$","gi"),s.length-1);n>=0;n--)t.test(s[n])&&i.push(s[n]),t.lastIndex=0;return i},sync:function(t){null!==t?(e?B(e.initialSettings||{}):_()?(function(){if(TradingView.onWidget()&&d.includes(window.location.host))for(var t="tradingview.",e=a.length;e--;){var s=a.key(e);if(0===s.indexOf(t)){var i=s.replace(t,S+".");a.setItem(i,a.getItem(s)),a.removeItem(s)}}}(),function(){x={};for(var t=!l.enabled("save_chart_properties_to_local_storage"),e=a.length;e--;){var s=a.key(e);if(s&&L(s)){var i=s.substring(M.length)
;t&&!A(i)||(x[i]=a.getItem(s))}}}()):B(t||{}),O.fire()):s=!0},onSync:O,setSettingsAdapter:function(t){e=t}}}());setTimeout((function(){s.e(30362).then(s.bind(s,276141)).then((t=>{t.clearOldSettings()}))}),3e4),t&&t.exports&&(t.exports=m)},986738:(t,e,s)=>{s.d(e,{ChartSession:()=>o});var i=s(707957),r=s.n(i),n=s(558603),a=s(389137);class o extends n.Session{constructor(t,e=!1){super(t,"cs",!1),this._sessionDisabled=!1,this._handler=null,this._criticalError=new(r()),this._symbolResolveMap=new Map,this._disableStatistics=e}destroy(){this._criticalError.destroy(),this._handler=null,this._symbolResolveMap.clear(),super.destroy()}serverTimeOffset(){return this._getChartApi().serverTimeOffset()}switchTimezone(t){return this._getChartApi().switchTimezone(this.sessionId(),t)}defaultResolutions(){return this._getChartApi().defaultResolutions()}availableCurrencies(){return this._getChartApi().availableCurrencies()}availableUnits(){return this._getChartApi().availableUnits()}availablePriceSources(t){return this._getChartApi().availablePriceSources(t)}resolveSymbol(t,e,s){if(this._symbolResolveMap.has(e)){const[t,i]=this._symbolResolveMap.get(e);return Array.isArray(i)?i.push(s):i.then(s),t}{const i=[s];return this._getChartApi().resolveSymbol(this.sessionId(),t,e,(s=>{"symbol_error"===s.method?this._symbolResolveMap.delete(e):this._symbolResolveMap.set(e,[t,Promise.resolve(s)]),i.forEach((t=>t(s)))})),this._symbolResolveMap.set(e,[t,i]),t}}requestFirstBarTime(t,e,s){return this._getChartApi().requestFirstBarTime(this.sessionId(),t,e,s)}createSeries(t,e,s,i,r,n,a){return this._getChartApi().createSeries(this.sessionId(),t,e,s,i,r,n,a)}modifySeries(t,e,s,i,r,n){return this._getChartApi().modifySeries(this.sessionId(),t,e,s,i,r,n)}removeSeries(t){return!!this.isConnected().value()&&this._getChartApi().removeSeries(this.sessionId(),t)}requestMoreData(t,e,s){return"number"==typeof t?this._getChartApi().requestMoreData(this.sessionId(),t):this._getChartApi().requestMoreData(this.sessionId(),t,e,s)}requestMoreTickmarks(t,e,s){return(0,a.isNumber)(t)?this._getChartApi().requestMoreTickmarks(this.sessionId(),t):this._getChartApi().requestMoreTickmarks(this.sessionId(),t,e,s)}requestMetadata(t,e){this._getChartApi().requestMetadata(this.sessionId(),t,e)}canCreateStudy(t){return this._getChartApi().canCreateStudy(t)}getStudyCounter(){return this._getChartApi().getStudyCounter()}createStudy(t,e,s,i,r,n,a){return this._getChartApi().createStudy(this.sessionId(),t,e,s,i,r,n,a)}rebindStudy(t,e,s,i,r,n,a){return this._getChartApi().rebindStudy(this.sessionId(),t,e,s,i,r,n,a)}modifyStudy(t,e,s,i,r){return this._getChartApi().modifyStudy(this.sessionId(),t,e,s,i,r)}removeStudy(t,e){return this._getChartApi().removeStudy(this.sessionId(),t,e)}createPointset(t,e,s,i,r,n){return this._getChartApi().createPointset(this.sessionId(),t,e,s,i,r,n)}modifyPointset(t,e,s,i){return this._getChartApi().modifyPointset(this.sessionId(),t,e,s,i)}removePointset(t){return this._getChartApi().removePointset(this.sessionId(),t)}setVisibleTimeRange(t,e,s,i,r,n){0}
criticalError(){return this._criticalError}connect(t=null){null!==t&&(this._handler=t),this._symbolResolveMap.clear(),super.connect()}setHandler(t){this._handler=t}connected(){return this.isConnected().value()&&!this._sessionDisabled}disable(){this._sessionDisabled=!0}chartApi(){return this._getChartApi()}_sendCreateSession(){Object.keys(this).forEach((t=>{/^(s|st|symbol_)\d+$/.test(t)&&delete this[t]})),this._getChartApi().chartCreateSession(this.sessionId(),this._disableStatistics)}_sendRemoveSession(){this._getChartApi().chartDeleteSession(this.sessionId())}_onMessage(t){this._handler&&this._handler(t)}_onCriticalError(t,e){this._criticalError.fire(t,e),super._onCriticalError(t,e)}}},674981:(t,e,s)=>{s.d(e,{lowerbound:()=>i,upperbound:()=>r});s(650151);function i(t,e,s,i=0,r=t.length){return function(t,e,s,i,r){let n=r-i;for(;0<n;){const r=n>>1,a=i+r;s(t(a),e)?(i=a+1,n-=r+1):n=r}return i}((e=>t[e]),e,s,i,r)}function r(t,e,s,i=0,r=t.length){let n=r-i;for(;0<n;){const r=n>>1,a=i+r;s(e,t[a])?n=r:(i=a+1,n-=r+1)}return i}},66732:(t,e,s)=>{s(6826)},6826:(t,e,s)=>{t=s.nmd(t);var i=s(201089).getLogger("Common.WatchedValue");function r(){}function n(t){if(!(this instanceof n))return new n(t);arguments.length>0&&(this._value=t),this._listeners=[]}n.prototype.value=function(){return this._owner?this._owner._value:this._value},n.prototype.setValue=function(t,e){var s=this._owner?this._owner:this;if("function"==typeof s.hook&&(t=s.hook(t)),s.writeLock)return s._value;var r=s._value===t||Number.isNaN(s._value)&&Number.isNaN(t);if(!e&&r&&s.hasOwnProperty("_value"))return t;s._value=t;for(var n=s._listeners.slice(),a=0,o=0;o<n.length;o++){n[o].once&&(s._listeners.splice(o-a,1),a++);try{n[o].cb(t)}catch(t){i.logError(t.stack||t.message)}}return t},n.prototype.deleteValue=function(){var t=this._owner?this._owner:this;if(t.hasOwnProperty("_value")){if(t.writeLock)return t._value;delete t._value;for(var e=t._listeners.slice(),s=0,r=0;r<e.length;r++){e[r].once&&(t._listeners.splice(r-s,1),s++);try{e[r].cb()}catch(t){i.logError(t.stack||t.message)}}}},n.prototype.subscribe=function(t,e){if("function"!=typeof t)throw new TypeError("callback must be a function");var s=!!e&&!!e.once,r=!!e&&!!e.callWithLast,n=this._owner?this._owner:this;if(r&&n.hasOwnProperty("_value")){try{t(n._value)}catch(t){i.logError(t.stack||t.message)}if(s)return}n._listeners.push({cb:t,owner:this,once:!!e&&!!e.once})},n.prototype.unsubscribe=function(t){var e=this._owner?this._owner:this;void 0===t&&(t=null);for(var s=e._listeners,i=s.length;i--;)s[i].owner!==this&&e!==this||s[i].cb!==t&&null!==t||s.splice(i,1)},n.prototype.listeners=function(){return(this._owner?this._owner:this)._listeners},n.prototype.readonly=function(){if(this._readonlyInstance)return this._readonlyInstance;var t=this._readonlyInstance=new r;return t.subscribe=this.subscribe.bind(this),t.unsubscribe=this.unsubscribe.bind(this),t.value=this.value.bind(this),t.when=this.when.bind(this),t.spawn=function(){return this.spawn.apply(this,arguments).readonly()}.bind(this),
this.destroy&&(t.destroy=this.destroy.bind(this)),t},n.prototype.spawn=function(t){var e=new n;return delete e._listeners,e._owner=this._owner||this,e.destroy=function(){if("function"==typeof t)try{t()}catch(t){i.logError(t.stack||t.message)}this.unsubscribe(),delete this._owner},e},n.prototype.when=function(t){var e=this;if(this.value())try{t()}catch(t){i.logError(t.stack||t.message)}else{var s=function(i){i&&(e.unsubscribe(s),t())};e.subscribe(s)}},n.prototype.opposite=function(){if(!this._opposite){var t=this,e=new n(!this.value());this.subscribe((function(t){e.setValue(!t)})),e.subscribe((function(e){t.setValue(!e)})),this._opposite=e}return this._opposite},"undefined"!=typeof window&&(window.WatchedValue=n),t&&t.exports&&(t.exports=n)},919892:(t,e,s)=>{function i(t){return"="+JSON.stringify(r(t))}function r(t){return Object.keys(t).sort().reduce(((e,s)=>("[object Object]"===Object.prototype.toString.call(t[s])?e[s]=r(t[s]):e[s]=t[s],e)),{})}function n(t){return Boolean(t.inputs)||function(t){return Boolean(t.replay)}(t)||t.session||t.adjustment||t["currency-id"]||t["unit-id"]?i(t):t.symbol}s.d(e,{encodeExtendedSymbolOrGetSimpleSymbolString:()=>n})},551775:(t,e,s)=>{s.d(e,{customFormatters:()=>i});const i={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null,priceFormatterFactory:null,studyFormatterFactory:null}},958067:(t,e,s)=>{s.d(e,{dateFormatFunctions:()=>p,getDateFormatWithWeekday:()=>g});var i=s(777754),r=s(39654),n=s(624444);const a={1:()=>i.t(null,void 0,s(795425)),2:()=>i.t(null,void 0,s(835050)),3:()=>i.t(null,void 0,s(651369)),4:()=>i.t(null,void 0,s(442762)),5:()=>i.t(null,{context:"short"},s(227991)),6:()=>i.t(null,void 0,s(715224)),7:()=>i.t(null,void 0,s(6215)),8:()=>i.t(null,void 0,s(38465)),9:()=>i.t(null,void 0,s(757902)),10:()=>i.t(null,void 0,s(73546)),11:()=>i.t(null,void 0,s(671230)),12:()=>i.t(null,void 0,s(92203))},o=(t,e)=>(e?t.getMonth():t.getUTCMonth())+1,l=(t,e)=>e?t.getFullYear():t.getUTCFullYear(),h=t=>t.toLocaleDateString(window.language?(0,r.getIsoLanguageCodeFromLanguage)(window.language):void 0,{weekday:"short",timeZone:"UTC"}),u=(t,e)=>(0,n.numberToStringWithLeadingZero)(((t,e)=>e?t.getDate():t.getUTCDate())(t,e),2),c=(t,e)=>a[o(t,e)](),d=(t,e)=>(0,n.numberToStringWithLeadingZero)(o(t,e),2),m=(t,e)=>(0,n.numberToStringWithLeadingZero)(l(t,e)%100,2),_=(t,e)=>(0,n.numberToStringWithLeadingZero)(l(t,e),4),p={"dd MMM 'yy":(t,e)=>`${u(t,e)} ${c(t,e)} '${m(t,e)}`,"MMM dd, yyyy":(t,e)=>`${c(t,e)} ${u(t,e)}, ${_(t,e)}`,"MMM yyyy":(t,e)=>`${c(t,e)} ${_(t,e)}`,"MMM dd":(t,e)=>`${c(t,e)} ${u(t,e)}`,"dd MMM":(t,e)=>`${u(t,e)} ${c(t,e)}`,"yyyy-MM-dd":(t,e)=>`${_(t,e)}-${d(t,e)}-${u(t,e)}`,"yy-MM-dd":(t,e)=>`${m(t,e)}-${d(t,e)}-${u(t,e)}`,"yy/MM/dd":(t,e)=>`${m(t,e)}/${d(t,e)}/${u(t,e)}`,"yyyy/MM/dd":(t,e)=>`${_(t,e)}/${d(t,e)}/${u(t,e)}`,"dd-MM-yyyy":(t,e)=>`${u(t,e)}-${d(t,e)}-${_(t,e)}`,"dd-MM-yy":(t,e)=>`${u(t,e)}-${d(t,e)}-${m(t,e)}`,"dd/MM/yy":(t,e)=>`${u(t,e)}/${d(t,e)}/${m(t,e)}`,"dd/MM/yyyy":(t,e)=>`${u(t,e)}/${d(t,e)}/${_(t,e)}`,
"MM/dd/yy":(t,e)=>`${d(t,e)}/${u(t,e)}/${m(t,e)}`,"MM/dd/yyyy":(t,e)=>`${d(t,e)}/${u(t,e)}/${_(t,e)}`};function g(t){return"ja"===window.language?(e,s)=>`${p[t](e,s)} (${h(e)})`:(e,s)=>`${h(e)} ${p[t](e,s)}`}Object.keys(p)},157954:(t,e,s)=>{s.d(e,{DateFormatter:()=>n});var i=s(551775),r=s(958067);class n{constructor(t="yyyy-MM-dd",e=!1){this._dateFormatFunc=e?(0,r.getDateFormatWithWeekday)(t):r.dateFormatFunctions[t]}format(t){return i.customFormatters&&i.customFormatters.dateFormatter?i.customFormatters.dateFormatter.format(t):this._dateFormatFunc(t,!1)}formatLocal(t){return i.customFormatters.dateFormatter?i.customFormatters.dateFormatter.formatLocal?i.customFormatters.dateFormatter.formatLocal(t):i.customFormatters.dateFormatter.format(t):this._dateFormatFunc(t,!0)}}},541346:(t,e,s)=>{s.d(e,{PercentageFormatter:()=>n});var i=s(624444),r=s(31341);class n extends i.PriceFormatter{constructor(t){super(t),this.type="percentage"}state(){const t=i.PriceFormatter.prototype.state.call(this);return t.percent=!0,t}parse(t){return t=t.replace("%",""),super.parse(t)}format(t,e,s,i,n=!0){const a=super.format(t,e,s,i,!1)+"%";return n?(0,r.forceLTRStr)(a):a}static serialize(t){return t.state()}static deserialize(t){return new n(t.priceScale)}}},624444:(t,e,s)=>{s.d(e,{PriceFormatter:()=>g,formatterOptions:()=>c,numberToStringWithLeadingZero:()=>p});var i=s(777754),r=s(960521),n=s(217504),a=s(389137),o=s(31341),l=s(667353);const h=(0,s(201089).getLogger)("Chart.PriceFormatter"),u=new RegExp(/^(-?)[0-9]+$/),c={decimalSign:".",decimalSignFractional:"'"},d=new Map;const m=new Map;function _(t,e,s,i){let r=0;if(t>0&&e>0){let e=t;for(s&&i&&(e/=i);e>1;)e/=10,r++}return r}function p(t,e){if(!(0,a.isNumber)(t))return"n/a";if(!(0,a.isInteger)(e))throw new TypeError("invalid length");if(e<0||e>24)throw new TypeError("invalid length");if(0===e)return t.toString();return("0000000000000000"+t.toString()).slice(-e)}class g{constructor(t,e,r,o,l,u){if(this.type="price",this._formatterErrors={custom:i.t(null,void 0,s(332061)),fraction:i.t(null,void 0,s(142015)),secondFraction:i.t(null,void 0,s(643247))},e&&!u||(e=1),(0,a.isNumber)(t)&&(0,a.isInteger)(t)||(t=100),t<0)throw new TypeError("invalid base");this._priceScale=t,this._minMove=e,this._minMove2=o,this._variableMinTick=l,this._variableMinTickData=r||void 0===l?void 0:(0,n.makeVariableMinTickData)(NaN,l),r&&void 0!==o&&o>0&&2!==o&&4!==o&&8!==o?h.logDebug("invalid minmove2"):(this._fractional=r,this._fractionalLength=_(this._priceScale,this._minMove,this._fractional,this._minMove2),this._ignoreMinMove=u)}isFractional(){return!!this._fractional}state(){return{fractional:this._fractional,fractionalLength:this._fractionalLength,minMove:this._minMove,minMove2:this._minMove2,priceScale:this._priceScale,variableMinTick:this._variableMinTick,ignoreMinMove:this._ignoreMinMove}}formatChange(t,e,s){return this._formatImpl(t-e,s,void 0,void 0,void 0,void 0,Math.min(Math.abs(t),Math.abs(e)))}format(t,e,s,i=!0,r=!0,n=!1){return this._formatImpl(t,e,s,i,r,n)}parse(t){return"+"===(t=(t=(0,
o.stripLTRMarks)(t)).replace("−","-"))[0]&&(t=t.substring(1)),this._fractional?this._minMove2?this._parseAsDoubleFractional(t):this._parseAsSingleFractional(t):this._parseAsDecimal(t)}hasForexAdditionalPrecision(){return!this._fractional&&10===this._minMove2}static serialize(t){return t.state()}static deserialize(t){return new g(t.priceScale,t.minMove,t.fractional,t.minMove2,t.variableMinTick,t.ignoreMinMove)}_formatImpl(t,e,s,i=!0,a=!0,h=!1,u){const c={price:t,priceScale:this._priceScale,minMove:this._minMove,fractionalLength:this._fractionalLength,tailSize:s,cutFractionalByPrecision:h};let d,m="";return t<0?(m=!1===i?"":"−",c.price=-t):t&&!0===e&&(m="+"),void 0!==this._variableMinTickData&&(Object.assign(c,function(t,e){const s=(0,n.getMinTick)({price:e,minTick:NaN,variableMinTickData:t,shouldCheckForEquality:!0}),i=Math.pow(10,(0,l.numOfDecimalPlaces)(s)),a=(0,r.Big)(s).mul(i).toNumber();return{priceScale:i,minMove:a,fractionalLength:_(i,a)}}(this._variableMinTickData,null!=u?u:c.price)),this._ignoreMinMove&&(c.minMove=1)),d=this._fractional?m+this._formatAsFractional(c.price,c.tailSize):m+this._formatAsDecimal(c),a?(0,o.forceLTRStr)(d):d}_formatAsExponential(t){const e=Math.floor(.75*Math.log10(this._priceScale)),s=t*Math.pow(10,e),i=`e-${e}`,r=Math.log10(this._priceScale)-e;return`${s.toFixed(r).replace(".",c.decimalSign)}${i}`}_formatAsDecimal(t){const{price:e,priceScale:s,minMove:i,fractionalLength:n=0,tailSize:a=0,cutFractionalByPrecision:o}=t;if(s>1e15)return this._formatAsExponential(e);let l;l=this._fractional?Math.pow(10,n):Math.pow(10,a)*s/(o?1:i);const h=1/l;let u;if(l>1)u=Math.floor(e);else{const t=Math.floor(Math.round(e/h)*h);u=0===Math.round((e-t)/h)?t:t+h}let d="";if(l>1){let t=o?new r.Big(e).mul(l).round(void 0,0).minus(new r.Big(u).mul(l)).toNumber():parseFloat((Math.round(e*l)-u*l).toFixed(n));t>=l&&(t-=l,u+=1);const s=o?new r.Big(t).round(n,0).toNumber():parseFloat(t.toFixed(n))*i;d=c.decimalSign+p(s,n+a),d=this._removeEndingZeros(d,a)}return u.toString()+d}_getFractPart(t,e,s){const i=[0,5],r=[0,2,5,7],n=[0,1,2,3,5,6,7,8];return 2===s?void 0===i[t]?-1:i[t]:4===s?void 0===r[t]?-1:r[t]:8===s&&2===e?void 0===n[t]?-1:n[t]:t}_formatAsFractional(t,e){const s=this._priceScale/this._minMove;let i=Math.floor(t),r=e?Math.floor(t*s)-i*s:Math.round(t*s)-i*s;r===s&&(r=0,i+=1);let n="";if(e){let a=(t-i-r/s)*s;a=Math.round(a*Math.pow(10,e)),n=p(a,e),n=this._removeEndingZeros(n,e)}if(!this._fractionalLength)throw new Error("_fractionalLength is not calculated");let a="";if(this._minMove2){const t=r%this._minMove2;r=(r-t)/this._minMove2;const e=p(r,this._fractionalLength),s=this._getFractPart(t,2,this._minMove2);a=e+c.decimalSignFractional+s}else r=this._getFractPart(r,1,this._priceScale),a=p(r*this._minMove,this._fractionalLength);return i.toString()+c.decimalSignFractional+a+n}_removeEndingZeros(t,e){for(let s=0;s<e&&"0"===t[t.length-1];s++)t=t.substring(0,t.length-1);return t}_parseAsDecimal(t){if(t.includes("e")){if(function(t){let e=d.get(t);return e||(e=new RegExp("^(-?)[0-9]+\\"+t+"[0-9]*e(-?)[0-9]+$"),
d.set(t,e)),e}(c.decimalSign).exec(t)){const e=parseFloat(t.replace(c.decimalSign,"."));return{value:e,res:!0,suggest:this.format(e)}}return{error:this._formatterErrors.custom,res:!1}}let e=u.exec(t);if(e){const e=parseFloat(t);return{value:e,res:!0,suggest:this.format(e)}}if(e=function(t){let e=m.get(t);return e||(e=new RegExp("^(-?)[0-9]+\\"+c.decimalSign+"[0-9]*$"),m.set(t,e)),e}(c.decimalSign).exec(t),e){const e=parseFloat(t.replace(c.decimalSign,"."));return{value:e,res:!0,suggest:this.format(e)}}return{error:this._formatterErrors.custom,res:!1}}_patchFractPart(t,e,s){const i={0:0,5:1},r={0:0,2:1,5:2,7:3},n={0:0,1:1,2:2,3:3,5:4,6:5,7:6,8:7};return 2===s?void 0===i[t]?-1:i[t]:4===s?void 0===r[t]?-1:r[t]:8===s&&2===e?void 0===n[t]?-1:n[t]:t}_parseAsSingleFractional(t){let e=u.exec(t);if(e){const e=parseFloat(t);return{value:e,res:!0,suggest:this.format(e)}}if(e=new RegExp("^(-?)([0-9]+)\\"+c.decimalSignFractional+"([0-9]+)$").exec(t),e){const t=!!e[1],s=parseInt(e[2]),i=this._priceScale,r=this._patchFractPart(parseInt(e[3]),1,i);if(r>=i||r<0)return{error:this._formatterErrors.fraction,res:!1};let n=s+r/i;return t&&(n=-n),{value:n,res:!0,suggest:this.format(n)}}return{error:this._formatterErrors.custom,res:!1}}_parseAsDoubleFractional(t){let e=u.exec(t);if(e){const e=parseFloat(t);return{value:e,res:!0,suggest:this.format(e)}}if(e=new RegExp("^(-?)([0-9]+)\\"+c.decimalSignFractional+"([0-9]+)\\"+c.decimalSignFractional+"([0-9]+)$").exec(t),e){const t=!!e[1],s=parseInt(e[2]),i=void 0!==this._minMove2?this._minMove2:NaN,r=this._priceScale/i,n=this._minMove2,a=this._patchFractPart(parseInt(e[3]),1,r),o=this._patchFractPart(parseInt(e[4]),2,n);if(a>=r||a<0)return{error:this._formatterErrors.fraction,res:!1};if(void 0!==n&&o>=n||o<0)return{error:this._formatterErrors.secondFraction,res:!1};let l=void 0!==n?s+a/r+o/(r*n):NaN;return t&&(l=-l),{value:l,res:!0,suggest:this.format(l)}}return{error:this._formatterErrors.custom,res:!1}}}},716714:(t,e,s)=>{s.d(e,{TimeFormatter:()=>c,hourMinuteFormat:()=>o,hourMinuteNonZeroSecondFormat:()=>a,hourMinuteSecondFormat:()=>n,twelveHourMinuteFormat:()=>u,twelveHourMinuteNonZeroSecondFormat:()=>h,twelveHourMinuteSecondFormat:()=>l});var i=s(551775),r=s(624444);const n="%h:%m:%s",a="%h:%m:%s+",o="%h:%m",l="%h:%m:%s %ampm",h="%h:%m:%s+ %ampm",u="%h:%m %ampm";class c{constructor(t){this._isTwelveHoursFormat=!1,this._valuesAndDelimeters=[];const e=t||n,s=new RegExp("%h|%m|%s\\+|%ss|%ampm|%s","g");let i=s.exec(e),r=0;for(;null!==i;){const t=i[0];"%ampm"===t&&(this._isTwelveHoursFormat=!0);const n=e.substring(r,i.index);""!==n&&this._valuesAndDelimeters.push(n),this._valuesAndDelimeters.push(t),r=i.index+t.length,i=s.exec(e)}}format(t){return i.customFormatters.timeFormatter?i.customFormatters.timeFormatter.format(t):this._formatTime(t,!1)}formatLocal(t){return i.customFormatters.timeFormatter?i.customFormatters.timeFormatter.formatLocal?i.customFormatters.timeFormatter.formatLocal(t):i.customFormatters.timeFormatter.format(t):this._formatTime(t,!0)}_formatTime(t,e){
let s=e?t.getHours():t.getUTCHours();const i=e?t.getMinutes():t.getUTCMinutes(),n=e?t.getSeconds():t.getUTCSeconds(),a=e?t.getMilliseconds():t.getUTCMilliseconds();let o="";this._isTwelveHoursFormat&&(o=s>=12?"PM":"AM",s%=12,s=s||12);let l="",h=!1;for(let t=this._valuesAndDelimeters.length-1;t>=0;t--){const e=this._valuesAndDelimeters[t];let u;switch(e){case"%h":u=(0,r.numberToStringWithLeadingZero)(s,2);break;case"%m":u=(0,r.numberToStringWithLeadingZero)(i,2);break;case"%s+":0!==n?u=(0,r.numberToStringWithLeadingZero)(n,2):(u="",h=!0);break;case"%s":u=(0,r.numberToStringWithLeadingZero)(n,2);break;case"%ss":u=(0,r.numberToStringWithLeadingZero)(a,3);break;case"%ampm":u=o;break;default:if(h){h=!1;continue}u=e}l=u+l}return l}}},223699:(t,e,s)=>{s.d(e,{Interval:()=>u,ResolutionKind:()=>n});const i=/^(\d*)([TSHDWMR])$/,r=/^(\d+)$/;var n,a;!function(t){t.Ticks="ticks",t.Seconds="seconds",t.Minutes="minutes",t.Days="days",t.Weeks="weeks",t.Months="months",t.Range="range",t.Invalid="invalid"}(n||(n={})),function(t){t.Hours="hours"}(a||(a={}));const o={};o[n.Ticks]=1e3,o[n.Seconds]=1e3,o[n.Minutes]=60*o[n.Seconds],o[n.Days]=1440*o[n.Minutes],o[n.Weeks]=7*o[n.Days];const l={T:n.Ticks,S:n.Seconds,D:n.Days,W:n.Weeks,M:n.Months,R:n.Range},h=new Set([n.Ticks,n.Seconds,n.Minutes]);class u{constructor(t,e){this._kind=n.Invalid,this._multiplier=0,t!==n.Invalid&&e>0&&(this._kind=t,this._multiplier=e)}kind(){return this._kind}multiplier(){return this._multiplier}isValid(){return this.kind()!==n.Invalid&&this.multiplier()>0}isDWM(){return this.isValid()&&!this.isRange()&&!this.isIntraday()&&!this.isTicks()}isIntraday(){const t=h.has(this.kind());return this.isValid()&&t}isSeconds(){return this.kind()===n.Seconds}isMinutes(){return this.kind()===n.Minutes}isMinuteHours(){return this.kind()===n.Minutes&&((t=this.multiplier())>=60&&!(t%60));var t}isDays(){return this.kind()===n.Days}isWeeks(){return this.kind()===n.Weeks}isMonths(){return this.kind()===n.Months}isRange(){return this.kind()===n.Range}isTicks(){return this.kind()===n.Ticks}isTimeBased(){return!this.isRange()}letter(){return this.isValid()&&this.kind()!==n.Minutes?this.kind()[0].toUpperCase():""}value(){return this.isValid()?this.kind()===n.Minutes?this.multiplier()+"":this.multiplier()+this.letter():""}isEqualTo(t){if(!(t instanceof u))throw new Error("Argument is not an Interval");return!(!this.isValid()||!t.isValid())&&(this.kind()===t.kind()&&this.multiplier()===t.multiplier())}inMilliseconds(t=Date.now()){if(!this.isValid()||this.isRange())return NaN;if(this.isMonths()){const e=new Date(t);e.setUTCMonth(e.getUTCMonth()+(this.multiplier()||1));return+e-t}const e=this.multiplier();return o[this.kind()]*e}static isEqual(t,e){return t===e||u.parse(t).isEqualTo(u.parse(e))}static parseExt(t){t=(t+"").toUpperCase().split(",")[0];let e=i.exec(t);return null!==e?"H"===e[2]?{interval:new u(n.Minutes,60*c(e[1])),guiResolutionKind:a.Hours}:{interval:new u(l[e[2]],c(e[1])),guiResolutionKind:l[e[2]]}:(e=r.exec(t),null!==e?{interval:new u(n.Minutes,c(e[1])),
guiResolutionKind:n.Minutes}:{interval:new u(n.Invalid,0),guiResolutionKind:n.Invalid})}static parse(t){return u.parseExt(t).interval}static kind(t){return u.parse(t).kind()}static isValid(t){return u.parse(t).isValid()}static isDWM(t){return u.parse(t).isDWM()}static isIntraday(t){return u.parse(t).isIntraday()}static isSeconds(t){return u.parse(t).isSeconds()}static isMinutes(t){return u.parse(t).isMinutes()}static isMinuteHours(t){return u.parse(t).isMinuteHours()}static isDays(t){return u.parse(t).isDays()}static isWeeks(t){return u.parse(t).isWeeks()}static isMonths(t){return u.parse(t).isMonths()}static isRange(t){return u.parse(t).isRange()}static isTicks(t){return u.parse(t).isTicks()}static isTimeBased(t){return u.parse(t).isTimeBased()}static normalize(t){const e=u.parse(t);return e.isValid()?e.value():null}}function c(t){return 0===t.length?1:parseInt(t,10)}},534741:(t,e,s)=>{var i;s.d(e,{PlotRowSearchMode:()=>i}),function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.Exact=0]="Exact",t[t.NearestRight=1]="NearestRight"}(i||(i={}))},178389:(t,e,s)=>{s.d(e,{unpackNonSeriesData:()=>n});var i=s(130551),r=s(133822);async function n(t){if(""===t)return null;const e=JSON.parse(t);if(!(0,i.isObject)(e)||"function"==typeof e)throw new Error("Non-object content in the non-series envelope");if((0,i.hasProperty)(e,"indexes_replace"))return{indexes_replace:!0};const n={indexes_replace:!1};if((0,i.hasProperty)(e,"offsets")&&(n.offsets=e.offsets),(0,i.hasProperty)(e,"isUpdate")){if("boolean"!=typeof e.isUpdate)throw new Error('Invalid type of "isUpdate" field');n.isUpdate=e.isUpdate}if((0,i.hasProperty)(e,"data")&&(n.data=e.data),(0,i.hasProperty)(e,"graphicsCmds")&&(n.graphicsCmds=(0,r.validateGraphicsCommands)(e.graphicsCmds)),(0,i.hasProperty)(e,"dataCompressed")||(0,i.hasProperty)(e,"graphicsCmdsCompressed")){const{default:t}=await Promise.all([s.e(93194),s.e(81578)]).then(s.t.bind(s,593194,23));if((0,i.hasProperty)(e,"dataCompressed")){const s=await(new t).loadAsync(e.dataCompressed,{base64:!0});n.data=JSON.parse(await s.file("").async("text"))}if((0,i.hasProperty)(e,"graphicsCmdsCompressed")){const s=await(new t).loadAsync(e.graphicsCmdsCompressed,{base64:!0});n.graphicsCmds=(0,r.validateGraphicsCommands)(JSON.parse(await s.file("").async("text")))}return n}return n}},195447:(t,e,s)=>{s.d(e,{PlotList:()=>d});var i=s(650151),r=s(674981),n=s(732149),a=s(201089),o=s(534741);const l=(0,a.getLogger)("Chart.PlotList"),h=30;function u(t){return t.index}function c(t){return t.value[0]}class d{constructor(t=null,e=null){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache=new Map,this._rowSearchCacheByIndex=new Map,this._rowSearchCacheByIndexWithoutEmptyValues=new Map,this._rowSearchCacheByTime=new Map,this._rowSearchCacheByTimeWithoutEmptyValues=new Map,this._plotFunctions=t||new Map,this._emptyValuePredicate=e}clear(){this._items=[],this._start=0,this._end=0,this._shareRead=!1,this._minMaxCache.clear(),this._invalidateSearchCaches()}first(){return this.size()>0?this._items[this._start]:null}last(){
return this.size()>0?this._items[this._end-1]:null}firstIndex(){return this.size()>0?this._indexAt(this._start):null}lastIndex(){return this.size()>0?this._indexAt(this._end-1):null}size(){return this._end-this._start}isEmpty(){return 0===this.size()}contains(t){return null!==this.search(t,o.PlotRowSearchMode.Exact)}valueAt(t){const e=this.search(t);return null!==e?e.value:null}add(t,e){if(this._shareRead)return l.logDebug("add: readonly collection modification attempt"),!1;const s={index:t,value:e},i=this._nonCachedSearch(t,o.PlotRowSearchMode.Exact,u);return this._invalidateSearchCaches(),null===i?(this._items.splice(this._lowerbound(t,u),0,s),this._start=0,this._end=this._items.length,!0):(this._items[i]=s,!1)}search(t,e=o.PlotRowSearchMode.Exact,s){return this._searchImpl(t,e,this._rowSearchCacheByIndex,this._rowSearchCacheByIndexWithoutEmptyValues,u,s)}searchByTime(t,e=o.PlotRowSearchMode.Exact,s){return this._searchImpl(t,e,this._rowSearchCacheByTime,this._rowSearchCacheByTimeWithoutEmptyValues,c,s)}fold(t,e){let s=e;for(let e=this._start;e<this._end;++e){s=t(this._indexAt(e),this._valueAt(e),s)}return s}findFirst(t,e){const s=void 0!==e&&Math.min(this._start+e,this._end)||this._end;for(let e=this._start;e<s;++e){const s=this._indexAt(e),i=this._valueAt(e);if(t(s,i))return{index:s,value:i}}return null}findLast(t,e){const s=void 0!==e&&Math.max(this._end-e,this._start)||this._start;for(let e=this._end-1;e>=s;--e){const s=this._indexAt(e),i=this._valueAt(e);if(t(s,i))return{index:s,value:i}}return null}each(t){for(let e=this._start;e<this._end;++e){if(t(this._indexAt(e),this._valueAt(e)))break}}reduce(t,e){let s=e;for(let e=this._start;e<this._end;++e){s=t(s,this._indexAt(e),this._valueAt(e))}return s}range(t,e){const s=new d(this._plotFunctions,this._emptyValuePredicate);return s._items=this._items,s._start=this._lowerbound(t,u),s._end=this._upperbound(e),s._shareRead=!0,s}plottableRange(t){const e=new d(this._plotFunctions,this._emptyValuePredicate);return e._items=this._items,e._start=this._upperbound(n.UNPLOTTABLE_TIME_POINT_INDEX),e._end=this._end,e._shareRead=!0,!0===t&&e._start>this._start&&(e._start-=1),e}rangeIterator(t,e){const s=this._lowerbound(t,u),i=this._upperbound(e);if(s===i)return{hasNext:()=>!1,next:()=>{throw new Error("Invalid operation")}};let r=s-1;return{hasNext:()=>r<i-1,next:()=>(r+=1,this._items[r])}}minMaxOnRangeCached(t,e,s){if(this.isEmpty())return null;let i=null;for(const r of s){i=m(i,this._minMaxOnRangeCachedImpl(t-r.offset,e-r.offset,r.name))}return i}minMaxOnRange(t,e,s){if(this.isEmpty())return null;let i=null;for(const r of s){i=m(i,this._minMaxOnRange(t-r.offset,e-r.offset,r.name))}return i}merge(t){return this._shareRead?(l.logDebug("merge: readonly collection modification attempt"),null):0===t.length?null:this.isEmpty()||t[t.length-1].index<this._items[0].index?this._prepend(t):t[0].index>this._items[this._items.length-1].index?this._append(t):1===t.length&&t[0].index===this._items[this._items.length-1].index?(this._updateLast(t[0]),t[0]):this._merge(t)}addTail(t,e=!1){
if(0===t.length)return;let s=0;e&&this._end-this._start>0&&(s=1,this._items[this._end-this._start-1].value=t[0].value);for(let e=s;e<t.length;++e){const s=t[e],i=this.lastIndex();if(null===i){l.logError("Can't add tail to the empty plotlist");break}this.add(i+1,s.value)}this._invalidateSearchCaches()}move(t){if(this._shareRead)return void l.logDebug("move: readonly collection modification attempt");if(0===t.length)return;const e=this._items.slice();for(const s of t){const t=this._bsearch(s.old,u);if(null!==t&&void 0!==e[t])if(s.new===n.INVALID_TIME_POINT_INDEX)e[t]=void 0;else{e[t]={index:s.new,value:e[t].value};const i=this._bsearch(s.new,u);if(null!==i){const t=e[i];void 0!==t&&t.index===s.new&&(e[i]=void 0)}}}this._items=e.filter((t=>void 0!==t)).sort(((t,e)=>t.index-e.index)),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._start=0,this._end=this._items.length}remove(t){if(this._shareRead)return l.logDebug("remove: readonly collection modification attempt"),null;const e=this._nonCachedSearch(t,o.PlotRowSearchMode.NearestRight,u);if(null===e)return null;const s=this._items.splice(e);return this._end=this._items.length,this._minMaxCache.clear(),this._invalidateSearchCaches(),s.length>0?s[0]:null}state(){const t=this._items.slice(this._start,this._end);return{start:0,end:t.length,data:t}}restoreState(t){t?(this._start=t.start,this._end=t.end,this._shareRead=!1,this._items=t.data,this._minMaxCache.clear(),this._invalidateSearchCaches()):this.clear()}_indexAt(t){return this._items[t].index}_valueAt(t){return this._items[t].value}_length(){return this._items.length}_searchImpl(t,e,s,i,r,n){const a=void 0!==n?s:i,o=void 0!==n?1e4*(e+1)+n:e;let l=a.get(t);if(void 0!==l){const t=l.get(o);if(void 0!==t)return t}const h=this._nonCachedSearch(t,e,r,n);if(null===h)return null;const u={index:this._indexAt(h),value:this._valueAt(h)};return void 0===l&&(l=new Map,a.set(t,l)),l.set(o,u),u}_nonCachedSearch(t,e,s,i){const r=this._lowerbound(t,s),n=r===this._end||t!==s(this._items[r]);if(n&&e!==o.PlotRowSearchMode.Exact)switch(e){case o.PlotRowSearchMode.NearestLeft:return this._searchNearestLeft(r,i);case o.PlotRowSearchMode.NearestRight:return this._searchNearestRight(r,i);default:throw new TypeError("Unknown search mode")}if(void 0===i||n||e===o.PlotRowSearchMode.Exact)return n?null:r;switch(e){case o.PlotRowSearchMode.NearestLeft:return this._nonEmptyNearestLeft(r,i);case o.PlotRowSearchMode.NearestRight:return this._nonEmptyNearestRight(r,i);default:throw new TypeError("Unknown search mode")}}_nonEmptyNearestRight(t,e){const s=(0,i.ensure)(this._emptyValuePredicate),r=(0,i.ensure)(e);for(;t<this._end&&s(this._valueAt(t),r);)t+=1;return t===this._end?null:t}_nonEmptyNearestLeft(t,e){const s=(0,i.ensureNotNull)(this._emptyValuePredicate),r=(0,i.ensure)(e);for(;t>=this._start&&s(this._valueAt(t),r);)t-=1;return t<this._start?null:t}_searchNearestLeft(t,e){if(t===this._start)return null;const s=t-1,i=s!==this._end?s:null;return void 0!==e&&null!==i?this._nonEmptyNearestLeft(i,e):i}_searchNearestRight(t,e){
const s=t,i=s!==this._end?s:null;return void 0!==e&&null!==i?this._nonEmptyNearestRight(i,e):i}_bsearch(t,e){const s=this._lowerbound(t,e);return s!==this._end&&t===e(this._items[s])?s:null}_lowerbound(t,e){return(0,r.lowerbound)(this._items,t,((t,s)=>e(t)<s),this._start,this._end)}_upperbound(t){return(0,r.upperbound)(this._items,t,((t,e)=>e.index>t),this._start,this._end)}_plotMinMax(t,e,s){let i=null;const r=this._plotFunctions.get(s);if(void 0===r)throw new Error(`Plot "${s}" is not registered`);for(let s=t;s<e;s++){const t=r(this._items[s].value);null==t||Number.isNaN(t)||(null===i?i={min:t,max:t}:(t<i.min&&(i.min=t),t>i.max&&(i.max=t)))}return i}_invalidateCacheForRow(t){const e=Math.floor(t.index/h);this._minMaxCache.forEach((t=>t.delete(e)))}_prepend(t){return(0,i.assert)(!this._shareRead,"collection should not be readonly"),(0,i.assert)(0!==t.length,"plotRows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=t.concat(this._items),this._start=0,this._end=this._items.length,t[0]}_append(t){return(0,i.assert)(!this._shareRead,"collection should not be readonly"),(0,i.assert)(0!==t.length,"plotRows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=this._items.concat(t),this._start=0,this._end=this._items.length,t[0]}_updateLast(t){(0,i.assert)(!this.isEmpty(),"plot list should not be empty");const e=this._items[this._end-1];(0,i.assert)(e.index===t.index,"last row index should match new row index"),this._invalidateCacheForRow(t),this._invalidateSearchCaches(),this._items[this._end-1]=t}_merge(t){return(0,i.assert)(0!==t.length,"plot rows should not be empty"),this._invalidateSearchCaches(),this._minMaxCache.clear(),this._items=function(t,e){const s=function(t,e){const s=t.length,i=e.length;let r=s+i,n=0,a=0;for(;n<s&&a<i;)t[n].index<e[a].index?n++:t[n].index>e[a].index?a++:(n++,a++,r--);return r}(t,e),i=new Array(s);let r=0,n=0;const a=t.length,o=e.length;let l=0;for(;r<a&&n<o;)t[r].index<e[n].index?(i[l]=t[r],r++):t[r].index>e[n].index?(i[l]=e[n],n++):(i[l]=e[n],r++,n++),l++;for(;r<a;)i[l]=t[r],r++,l++;for(;n<o;)i[l]=e[n],n++,l++;return i}(this._items,t),this._start=0,this._end=this._items.length,t[0]}_minMaxOnRangeCachedImpl(t,e,s){if(this.isEmpty())return null;let r=null;const n=(0,i.ensureNotNull)(this.firstIndex()),a=(0,i.ensureNotNull)(this.lastIndex()),o=Math.max(t,n),l=Math.min(e,a),u=Math.ceil(o/h)*h,c=Math.max(u,Math.floor(l/h)*h);r=m(r,this._minMaxOnRange(o,Math.min(u,e,l),s));let d=this._minMaxCache.get(s);void 0===d&&(d=new Map,this._minMaxCache.set(s,d));for(let t=Math.max(u+1,o);t<c;t+=h){const e=Math.floor(t/h);let i=d.get(e);if(void 0===i){const t=e*h,r=(e+1)*h-1;i=this._minMaxOnRange(t,r,s),d.set(e,i)}r=m(r,i)}r=m(r,this._minMaxOnRange(c,l,s));return r}_minMaxOnRange(t,e,s){return this._plotMinMax(this._lowerbound(t,u),this._upperbound(e),s)}_invalidateSearchCaches(){this._rowSearchCacheByIndex.clear(),this._rowSearchCacheByIndexWithoutEmptyValues.clear(),this._rowSearchCacheByTime.clear(),
this._rowSearchCacheByTimeWithoutEmptyValues.clear()}}function m(t,e){if(null===t)return e;if(null===e)return t;return{min:Math.min(t.min,e.min),max:Math.max(t.max,e.max)}}},824837:(t,e,s)=>{s(6826)},339315:(t,e,s)=>{},544421:(t,e,s)=>{s.d(e,{SeriesData:()=>d});var i,r=s(650151),n=s(195447),a=s(674981);!function(t){t[t.FromLeft=-1]="FromLeft",t[t.FromRight=1]="FromRight"}(i||(i={}));const o={open:t=>t[1],high:t=>t[2],low:t=>t[3],close:t=>t[4],hl2:t=>(t[2]+t[3])/2,hlc3:t=>(t[2]+t[3]+t[4])/3,ohlc4:t=>(t[1]+t[2]+t[3]+t[4])/4},l=["open","high","low","close","hl2","hlc3","ohlc4"];function h(){const t=new Map;return l.forEach(((e,s)=>{t.set(e,function(t,e,s){const i=o[null!=e?e:t],r=o[t],n=o[null!=s?s:t];return(t,e)=>{switch(e){case 0:return i(t);case 2:return n(t);default:return r(t)}}}(e))})),t}function u(t,e){return null==t[e]}const c=[{barsToMerge:10,forBarspacingLargerThen:.03},{barsToMerge:30,forBarspacingLargerThen:.01},{barsToMerge:100,forBarspacingLargerThen:.003},{barsToMerge:500,forBarspacingLargerThen:0}];class d{constructor(){this._pressedChunks={chunks:new Map,priceSource:"uninitialized"},this.m_bars=new n.PlotList(h(),u),this.m_nsBars=new n.PlotList(h(),u),this._clearPressedChunks()}bars(){return this.m_bars}nsBars(){return this.m_nsBars}pressedChunks(t,e){if(e!==this._pressedChunks.priceSource){this._pressedChunks.priceSource=e;const t=this.m_bars.first();t&&(this._clearPressedChunks(),this._rebuildPressedChunks(t))}const s=(0,r.ensureDefined)(c.find((e=>e.forBarspacingLargerThen<=t)));return(0,r.ensureDefined)(this._pressedChunks.chunks.get(s.barsToMerge))}mergeRegularBars(t){const e=this.m_bars.size(),s=this.m_bars.merge(t);return s&&"uninitialized"!==this._pressedChunks.priceSource&&(e===this.m_bars.size()&&s.index===this.m_bars.lastIndex()?this._updateLatestChunks():this._rebuildPressedChunks(s)),s}size(){return this.m_bars.size()+this.m_nsBars.size()}each(t){this.m_bars.each(t),this.m_nsBars.each(t)}clear(){this.m_bars.clear(),this.m_nsBars.clear(),this.lastProjectionPrice=void 0,this._clearPressedChunks()}isEmpty(){return this.m_bars.isEmpty()&&this.m_nsBars.isEmpty()}first(){return this.m_bars.isEmpty()?this.m_nsBars.first():this.m_bars.first()}last(){return this.m_nsBars.isEmpty()?this.m_bars.last():this.m_nsBars.last()}search(t,e){return this.nsBars().isEmpty()?this.bars().search(t,e):this.bars().isEmpty()||(0,r.ensureNotNull)(this.nsBars().firstIndex())<=t?this.nsBars().search(t,e):this.bars().search(t,e)}valueAt(t){const e=this.search(t);return null!==e?e.value:null}plotValueToTimePointIndex(t,e,s){if(s===i.FromRight){const s=(s,i)=>{const r=i[e];return null!=r&&t>=r},i=this.m_bars.findLast(s);if(null!==i)return i.index;const r=this.m_nsBars.findLast(s);return null!==r?r.index:this.m_bars.firstIndex()}if(s===i.FromLeft){const s=(s,i)=>{const r=i[e];return null!=r&&t<=r},i=this.m_bars.findFirst(s);if(null!==i)return i.index;const r=this.m_nsBars.findFirst(s);return null!==r?r.index:this.m_bars.lastIndex()}throw new Error("plotValueToTimePointIndex: unsupported search mode")}moveData(t){
this.m_bars.move(t),this.m_nsBars.move(t),this.m_bars.size()>0&&this._rebuildPressedChunks((0,r.ensureNotNull)(this.m_bars.first()))}_rebuildPressedChunks(t){const e=this._pressedChunks.priceSource;if("uninitialized"===e)return;const s=t.index,i=o[e],n=(t,e,s)=>{let r=null;for(;t.hasNext();){const n=t.next(),a=i(n.value);r&&n.index-r.startTime>=s.barsToMerge&&(e.push(r),r=null),r?(r.endTime=n.index,r.high=Math.max(r.high,a),r.low=Math.min(r.low,a),r.close=a):r={startTime:n.index,endTime:n.index,open:a,high:a,low:a,close:a}}r&&e.push(r)};c.forEach((t=>{const e=(0,r.ensureDefined)(this._pressedChunks.chunks.get(t.barsToMerge)),i=(0,a.lowerbound)(e,s,((t,e)=>t.endTime<e));if(0===i&&e.length>0){const s=e[0].startTime-1,i=(0,r.ensureNotNull)(this.m_bars.firstIndex()),a=this.m_bars.rangeIterator(i,s),o=[];n(a,o,t);const l=o.concat(e);this._pressedChunks.chunks.set(t.barsToMerge,l)}else{const s=(0,r.ensureNotNull)(this.m_bars.lastIndex());e.splice(i);let a=(0,r.ensureNotNull)(this.m_bars.firstIndex());e.length&&(a=e[e.length-1].endTime+1);const o=this.m_bars.rangeIterator(a,s);n(o,e,t)}}))}_updateLatestChunks(){const t=(0,r.ensureNotNull)(this.m_bars.lastIndex());c.forEach((e=>{const s=(0,r.ensureDefined)(this._pressedChunks.chunks.get(e.barsToMerge)),i=this.m_bars.rangeIterator(t,t).next(),n=i.value[4],a=s[s.length-1];a.high=Math.max(a.high,n),a.low=Math.min(a.low,n),a.close=n,a.endTime=i.index}))}_clearPressedChunks(){c.forEach((t=>this._pressedChunks.chunks.set(t.barsToMerge,[])))}}},444331:(t,e,s)=>{s.d(e,{symbolForApi:()=>o});s(777754),s(62802),s(339315),s(223699),s(624444);var i=s(244842),r=s(650151);s(943994),s(541346),s(66732),s(824837);const n=i.enabled("pay_attention_to_ticker_not_symbol");i.enabled("uppercase_instrument_names"),i.enabled("charting_library_single_symbol_request"),i.enabled("use_ticker_on_symbol_info_update"),i.enabled("hide_object_tree_and_price_scale_exchange_label");function a(t,e){return null!==t?t.full_name:e}function o(t,e){return n&&t?(0,r.ensureDefined)(t.ticker):a(t,e)}},175878:(t,e,s)=>{s.d(e,{SeriesDataSource:()=>v});var i=s(650151),r=s(389137),n=s(919892),a=s(223699),o=s(544421),l=s(178389),h=s(826989),u=s(442410),c=s(201089),d=s(444331);const m=(0,c.getLogger)("Chart.SeriesDataSource");var _;!function(t){t[t.Idle=0]="Idle",t[t.AwaitingConnection=1]="AwaitingConnection",t[t.AwaitingFirstDataUpdate=2]="AwaitingFirstDataUpdate",t[t.Active=3]="Active"}(_||(_={}));let p=1;let g=1;function f(t){return t.startDate?t.endDate||t.count?t.endDate?["from_to",t.startDate,t.endDate]:["bar_count",t.startDate,(0,i.ensure)(t.count)]:["from_to",t.startDate]:t.count||300}class v{constructor(t,e,s,i){this._symbol=null,this._resolvedSymbolName=null,this._createSeriesOverriddenParams=0,this._instanceId=null,this._symbolInstanceId=null,this._resolution=null,this._timeFrame=null,this._data=new o.SeriesData,this._dataEvents=new u.SeriesDataEvents,this._status=_.Idle,this._turnaroundCounter=1,this._boundOnGatewayIsConnectedChanged=this._onGatewayIsConnectedChanged.bind(this),
this._ongoingDataUpdate=Promise.resolve(),this._gateway=t,this._turnaroundPrefix=e,this._createSeriesParams=f(null!=s?s:{count:300}),this._timeFrame=i||null,this._gateway.isConnected().subscribe(this._boundOnGatewayIsConnectedChanged)}destroy(){this.stop(),this._gateway.isConnected().unsubscribe(this._boundOnGatewayIsConnectedChanged)}modifySeries(t,e,s=null,n=!1){n&&(m.logNormal("Due to force flag clearing symbol & resolution to force re-requesting data."),this._symbol=null,this._resolution=null);const o=this._symbol,l=this._resolution;if(this._symbol=t,this._resolution=e,null===this._instanceId)return void(this._timeFrame=s);const h=!(0,r.deepEquals)(o,t)[0]||null!==this._resolvedSymbolName&&this._resolvedSymbolName!==this._getSymbolNameString(t),u=null===l||!a.Interval.isEqual(l,e);(h||u||null!==s)&&(this._timeFrame=null,(h||u)&&this._turnaroundCounter++,h&&this._resolveSymbol(),this._gateway.modifySeries(this._instanceId,this.turnaround(),(0,i.ensureNotNull)(this._symbolInstanceId),this._resolution,s,this._onMessage.bind(this)),this._dataEvents.fireModified())}requestMoreData(t){null!==this._instanceId&&this._gateway.requestMoreData(this._instanceId,t,this._onMessage.bind(this))}requestMoreTickmarks(t){null!==this._instanceId&&this._gateway.requestMoreTickmarks(this._instanceId,t,this._onMessage.bind(this))}isStarted(){return this._status!==_.Idle}isActive(){return this._status===_.Active}resolution(){return this._resolution}start(){this.isStarted()?m.logNormal("start: data source is already started, nothing to do"):((0,i.assert)(null!==this._symbol,"symbol must be set before start"),(0,i.assert)(null!==this._resolution,"resolution must be set before start"),this._gateway.isConnected().value()?this._createSeries():this._changeStatusTo(_.AwaitingConnection))}stop(){this.isStarted()?(null!==this._instanceId&&(this._gateway.removeSeries(this._instanceId),this._instanceId=null),this._changeStatusTo(_.Idle)):m.logNormal("stop: data source is already stopped, nothing to do")}instanceId(){return this._instanceId}data(){return this._data}clearData(){this.isStarted()?this._enqueueUpdate((()=>this._clearDataImpl())):this._clearDataImpl()}dataEvents(){return this._dataEvents}turnaround(){return`${this._turnaroundPrefix}${this._turnaroundCounter}`}symbolInstanceId(){return this._symbolInstanceId}symbol(){return this._symbol}moveData(t){this._enqueueUpdate((()=>this._data.moveData(t)))}setInitialRequestOptions(t){this._createSeriesOverriddenParams=f(t)}_resolveSymbol(){null!==this._symbol&&(this._symbolInstanceId=this._gateway.resolveSymbol("sds_sym_"+p++,(0,n.encodeExtendedSymbolOrGetSimpleSymbolString)(this._symbol),this._onMessage.bind(this)))}_clearDataImpl(){this._data.clear()}_changeStatusTo(t){(0,i.assert)(this._status!==t,"Source and destination status should be distinct"),m.logNormal(`Status changed from ${_[this._status]} to ${_[t]}`),this._status=t}_createSeries(){(0,i.assert)(this._status!==_.Active,'Status should not be "Active" when creating a study'),this._instanceId="sds_"+g++,this._resolveSymbol()
;const t=this._createSeriesOverriddenParams||this._createSeriesParams;this._createSeriesOverriddenParams&&(this._createSeriesOverriddenParams=0),this._gateway.createSeries(this._instanceId,this.turnaround(),(0,i.ensureNotNull)(this._symbolInstanceId),(0,i.ensureNotNull)(this._resolution),t,this._timeFrame,this._onMessage.bind(this)),this._timeFrame=null,this._changeStatusTo(_.AwaitingFirstDataUpdate),this._dataEvents.fireCreated(this._instanceId)}_onGatewayIsConnectedChanged(t){t?this._onGatewayConnected():this._onGatewayDisconnected()}_onGatewayConnected(){this._status===_.AwaitingConnection&&this._createSeries()}_onGatewayDisconnected(){this._status!==_.Idle&&this._status!==_.AwaitingConnection&&(this._instanceId=null,this._changeStatusTo(_.AwaitingConnection)),this._turnaroundCounter=1}_onMessage(t){this._enqueueUpdate((()=>this._onMessageImpl(t)))}async _onMessageImpl(t){switch(t.method){case"symbol_resolved":{const[e,s]=t.params;if(e!==this._symbolInstanceId){m.logNormal(`Resolve for old symbol, expected: ${this._symbolInstanceId}, actual ${t.params[0]}`);break}this._onSymbolResolved(s);break}case"symbol_error":if(t.params[0]!==this._symbolInstanceId){m.logNormal(`Symbol error for old symbol, expected: ${this._symbolInstanceId}, actual ${t.params[0]}`);break}this._onSymbolError(t);break;case"series_timeframe":{const[e,s,i,r,n,a,o]=t.params;if(!this._checkTurnaround(e,s)){m.logNormal(`Time frame for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${e} (${s})`);break}this._onSeriesTimeFrame(i,r,n,a,o);break}case"series_error":{const[e,s]=t.params;if(!this._checkTurnaround(e,s)){m.logNormal(`Series error for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${e} (${s})`);break}this._onSeriesError(t.params[2]);break}case"series_loading":{const[e,s]=t.params;if(!this._checkTurnaround(e,s))break;this._onSeriesLoading(t.time);break}case"series_completed":{const[e,s,i,r]=t.params;if(!this._checkTurnaround(e,i)){m.logNormal(`Series completed for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${e} (${i})`);break}this._onSeriesCompleted(s,t.time,r);break}case"data_update":if(!this._checkTurnaround(t.params.customId,t.params.turnaround)){m.logNormal(`Data update for old data, expected: ${this._symbolInstanceId} (${this.turnaround()}), actual ${t.params.customId} (${t.params.turnaround})`);break}await this._onDataUpdate(t.params.plots,t.params.nonseries,t.params.lastBar);break;case"clear_data":if(t.params.turnaround!==this.turnaround()){m.logNormal(`Clear data for old data, expected: ${this.turnaround()}, actual ${t.params.turnaround}`);break}this._clearDataImpl(),this._dataEvents.fireDataUpdated(void 0,!1,null)}}_onSeriesError(t){let e,s;if("string"==typeof t)s={error:t},e=t;else if(s=t,t.ctx){const s={};Object.entries(t.ctx).forEach((([t,e])=>{s[t]=e.toString()})),e=t.error.format(s)}else e=t.error;if(e.startsWith("study_not_auth:")){const t=e.split(":",2)[1].split("@",2)[0]
;if(["BarSetRenko","BarSetPriceBreak","BarSetKagi","BarSetPnF"].includes(t))this._dataEvents.fireChartTypeNotPermitted(t);else if("BarSetSpread"===t)this._dataEvents.fireIntradaySpreadNotPermitted();else if("BarSetRange"===t){const t=`${(0,i.ensureNotNull)(this._symbol).inputs.range}R`;this._dataEvents.fireCustomIntervalNotPermitted(t)}}else"resolution_not_entitled"===e?this._dataEvents.fireIntradayExchangeNotPermitted():"custom_resolution"===e?this._dataEvents.fireCustomIntervalNotPermitted((0,i.ensureNotNull)(this._resolution)):"seconds_not_entitled"===e&&this._dataEvents.fireSecondsIntervalNotPermitted();this._dataEvents.fireSeriesError(s)}_onSeriesTimeFrame(t,e,s,i,r){this._dataEvents.fireSeriesTimeFrame(t,e,s,null==i||i,r)}_onSymbolError(t){if(t.params[1]===h.permissionDenied)switch(t.params[2]){case h.SymbolErrorPermissionDeniedReason.Symbol:this._dataEvents.fireSymbolNotPermitted(t.params[3]);break;case h.SymbolErrorPermissionDeniedReason.GroupPermission:this._dataEvents.fireSymbolGroupNotPermitted(t.params[3]);break;default:this._dataEvents.fireSymbolNotPermitted(t.params[2])}else t.params[1]===h.invalidSymbol&&this._dataEvents.fireSymbolInvalid();this._dataEvents.fireSymbolError(t.params[1])}_onSymbolResolved(t){this._resolvedSymbolName=(0,d.symbolForApi)(t,this._getSymbolNameString((0,i.ensureNotNull)(this._symbol))),this._dataEvents.fireSymbolResolved(t)}_getSymbolNameString(t){return"string"==typeof t.symbol?t.symbol:t.symbol.symbol}async _onDataUpdate(t,e,s){this._onDataUnpacked(t,s,await async function(t){if(void 0===t)return{projectionPlots:[],boxSize:null};if(""===t.d||"nochange"===t.indexes)return null;const e=await(0,l.unpackNonSeriesData)(t.d);if(null===e||e.indexes_replace)return null;const s=t.indexes,{bars:i,price:r,boxSize:n,reversalAmount:a}=e.data,o=(i||[]).map((t=>{let e;return"factor"in t?e=t.factor:"additionalPrice"in t&&(e=t.additionalPrice),{index:s[t.time],value:[0,t.open,t.high,t.low,t.close,t.volume,e]}}));return{lastPrice:r,projectionPlots:o,reversalAmount:a,boxSize:n}}(e))}_enqueueUpdate(t){return this._ongoingDataUpdate=this._ongoingDataUpdate.then(t,t),this._ongoingDataUpdate}_onDataUnpacked(t,e,s){if(this._status===_.Idle)return;this._status===_.AwaitingFirstDataUpdate&&(this._changeStatusTo(_.Active),this._clearDataImpl());const i=this._data.bars().size(),r=this._data.bars().firstIndex(),n=this._data.mergeRegularBars(t);null!==s&&(this._data.nsBars().clear(),this._data.nsBars().merge(s.projectionPlots),this._data.lastProjectionPrice=s.lastPrice,null!==s.boxSize&&(this._data.boxSize=s.boxSize),this._data.reversalAmount=s.reversalAmount);const a=null===r||null!==n&&n.index<r;this._dataEvents.fireDataUpdated(e,a,n),i!==this._data.bars().size()&&null!==n&&this._dataEvents.fireBarReceived(n)}_onSeriesLoading(t){this._dataEvents.fireLoading(t)}_onSeriesCompleted(t,e,s){this._dataEvents.fireCompleted({updateMode:t,time:e,flags:s})}_checkTurnaround(t,e){return this._instanceId===t&&(void 0===e||e===this.turnaround())}}},464539:(t,e,s)=>{s.d(e,{getTimeFormatForInterval:()=>r})
;var i=s(716714);function r(t,e){if(t.isRange())return function(t){return"12-hours"===t?i.twelveHourMinuteNonZeroSecondFormat:i.hourMinuteNonZeroSecondFormat}(e);return t.isSeconds()||t.isTicks()?function(t){return"12-hours"===t?i.twelveHourMinuteSecondFormat:i.hourMinuteSecondFormat}(e):function(t){return"12-hours"===t?i.twelveHourMinuteFormat:i.hourMinuteFormat}(e)}},798218:(t,e,s)=>{s.d(e,{frameElementId:()=>r});const i=window.initData.hashSettings||{},r="string"==typeof i.frameElementId?i.frameElementId:null},868073:(t,e,s)=>{function i(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}s.d(e,{regExpEscape:()=>i})},208817:(t,e,s)=>{s.d(e,{getMiniTimeFrameOptions:()=>o});var i=s(603706);const r=Date.now();function n(t){const e=new Date(r);return e.setMonth(e.getMonth()-t),Math.trunc(e.valueOf()/1e3)}function a(t){const e=new Date(r);return e.setFullYear(e.getFullYear()-t),Math.trunc(e.valueOf()/1e3)}function o(t){const e=(0,i.getTimeFrames)();return[{...e[t?"lastsession":"1d"]},{...e["1m"],targetResolution:"1D",from:n(1)},{...e["3m"],targetResolution:"1D",from:n(3)},{...e["12m"],from:a(1)},{...e["60m"],targetResolution:"1M",from:a(5)},{...e.all}]}},146585:(t,e,s)=>{s.d(e,{daysStringLiteral:()=>r,monthsStringLiteral:()=>a,stringAsResolution:()=>l,weeksStringLiteral:()=>n,yearsStringLiteral:()=>o});var i=s(777754);const r=t=>i.t(null,{plural:"{str} days",count:t,replace:{str:`${t}`}},s(774262)),n=t=>i.t(null,{plural:"{str} weeks",count:t,replace:{str:`${t}`}},s(14074)),a=t=>i.t(null,{plural:"{str} months",count:t,replace:{str:`${t}`}},s(128039)),o=t=>i.t(null,{plural:"{str} years",count:t,replace:{str:`${t}`}},s(408222)),l=t=>t},337779:(t,e,s)=>{function i(t){return t.reduce((function(t,e,s){return~t.indexOf(e)||t.push(e),t}),[])}s.r(e),s.d(e,{uniq:()=>i})}}]);